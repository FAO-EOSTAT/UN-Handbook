<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Gilberto Camara, Lorenzo de Simone, Ronald Jansen">

<title>24&nbsp; Extraction of crop statistics from crop type and crop yield maps – UN Handbook on Remote Sensing for Agricultural Statistics</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./ad_world_cereal.html" rel="next">
<link href="./additional.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-ea385d0e468b0dd5ea5bf0780b1290d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-931bd9de4a2e97c797357f31cd37fa94.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./additional.html">Additional Topics</a></li><li class="breadcrumb-item"><a href="./ad_geoglam.html"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Extraction of crop statistics from crop type and crop yield maps</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">UN Handbook on Remote Sensing for Agricultural Statistics</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/FAO-EOSTAT/UN-Handbook" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Welcome</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./howto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">How to use this handbook</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./theory.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Foundations</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./th_remote_sensing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Remote Sensing images: optical, SAR</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./th_lucc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Land cover and crop classification schemas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./th_quality_control.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Quality control of training sets for agricultural statistics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./th_machine_learning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Machine learning classification of remote sensing images</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./th_uncertainty.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Spatial map uncertainty estimation and active learning in crop classification</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./th_validation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Map validation and use of maps for area estimation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./th_data_sources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">EO Big Data Sources</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./th_design_frames.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Remote Sensing in the Design of Sampling Frames</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./th_parcel_extraction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Automatic Extraction of Parcels</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./crop_type_mapping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Use Cases in Crop Type Mapping</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ct_poland.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Crop monitoring with SAR images in Poland</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ct_mexico.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Crop classification in Mexico</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ct_senegal.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Multi-seasonal crop mapping in Senegal</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ct_zimbabwe.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Crop classification in Zimbabwe</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ct_chile.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Crop classification and land use mapping in Chile</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ct_digital_earth_africa.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Crop classification using Digital Earth Africa</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./crop_yield_estimation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Crop yield estimation</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cy_finland.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Early-season crop yield mapping in Finland</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cy_indonesia.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Classifying phenology in Indonesia</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cy_poland.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Yield Forecasting in Poland</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cy_colombia.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Rice Phenology in Colombia</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cy_china.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Crop type classification and crop yield estimation in China</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./additional.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Additional Topics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ad_geoglam.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Extraction of crop statistics from crop type and crop yield maps</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ad_world_cereal.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">WorldCereal - A Global Effort for Crop Mapping</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ad_uav_applications.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">UAV use in Agricultural Statistics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ad_disaster_response.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Remote Sensing for Agricultural Disaster Response</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ad_governance.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Data Governance for Agricultural Statistics</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">24.1</span> Introduction</a></li>
  <li><a href="#map-corrected-estimation" id="toc-map-corrected-estimation" class="nav-link" data-scroll-target="#map-corrected-estimation"><span class="header-section-number">24.2</span> Map-Corrected Estimation</a></li>
  <li><a href="#survey-calibrated-mapping" id="toc-survey-calibrated-mapping" class="nav-link" data-scroll-target="#survey-calibrated-mapping"><span class="header-section-number">24.3</span> Survey-Calibrated Mapping</a></li>
  <li><a href="#uncertainty-aware-inference-from-imperfect-maps" id="toc-uncertainty-aware-inference-from-imperfect-maps" class="nav-link" data-scroll-target="#uncertainty-aware-inference-from-imperfect-maps"><span class="header-section-number">24.4</span> Uncertainty-Aware Inference from Imperfect Maps</a></li>
  <li><a href="#why-these-paradigms-matter" id="toc-why-these-paradigms-matter" class="nav-link" data-scroll-target="#why-these-paradigms-matter"><span class="header-section-number">24.5</span> Why These Paradigms Matter</a></li>
  <li><a href="#choosing-the-right-paradigm-comparative-considerations" id="toc-choosing-the-right-paradigm-comparative-considerations" class="nav-link" data-scroll-target="#choosing-the-right-paradigm-comparative-considerations"><span class="header-section-number">24.6</span> Choosing the Right Paradigm: Comparative Considerations</a></li>
  <li><a href="#bridging-science-statistics-and-policy-through-the-last-mile" id="toc-bridging-science-statistics-and-policy-through-the-last-mile" class="nav-link" data-scroll-target="#bridging-science-statistics-and-policy-through-the-last-mile"><span class="header-section-number">24.7</span> Bridging Science, Statistics, and Policy through the Last Mile</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/FAO-EOSTAT/UN-Handbook/edit/quarto/ad_geoglam.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/FAO-EOSTAT/UN-Handbook/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./additional.html">Additional Topics</a></li><li class="breadcrumb-item"><a href="./ad_geoglam.html"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Extraction of crop statistics from crop type and crop yield maps</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Extraction of crop statistics from crop type and crop yield maps</span></h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Lorenzo de Simone, Inbal Backer-Reshef, Sophie Bontemps, Sherrie Wang, Sergii Scacun, Joseph Wagner </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="introduction" class="level2" data-number="24.1">
<h2 data-number="24.1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">24.1</span> Introduction</h2>
<p>Earth Observation (EO) has become indispensable for generating timely, spatially explicit data on agricultural production. Yet, the final and most consequential step — turning maps into statistics — remains riddled with confusion and poor practices. In particular, there is a widespread tendency to assume that once a crop type or yield map is generated, one can simply count the number of pixels in a given class and multiply by pixel size. This shortcut, though common, is statistically unsound.</p>
<p>Pixel counting assumes that the map is a perfect representation of reality — an assumption rarely, if ever, valid. Classification errors, mixed pixels, spatial autocorrelation, and resolution mismatches all undermine the reliability of raw pixel aggregates. As <span class="citation" data-cites="Olofsson2014"><a href="#ref-Olofsson2014" role="doc-biblioref">[1]</a></span> emphasized, failure to adjust for classification error can lead to area estimates that are biased by 15% or more. Worse, these biases are often invisible to the user, as uncertainty is not quantified or reported. These concerns have been echoed in broader remote sensing literature, which warns against the widespread neglect of error propagation in map-based area statistics <span class="citation" data-cites="Stehman2019"><a href="#ref-Stehman2019" role="doc-biblioref">[2]</a></span>.</p>
<p>For National Statistical Offices (NSOs), whose mandate is to produce statistically defensible, reproducible, and uncertainty-aware agricultural statistics, such practices are unacceptable. EO maps can and should be used — but their outputs must be interpreted and corrected within a proper statistical framework. This chapter introduces three leading paradigms that have emerged as robust and operationally viable approaches for extracting agricultural statistics from EO-derived maps. Each paradigm corresponds to a real-world use case developed by leading institutions and collaborators in this Handbook.</p>
</section>
<section id="map-corrected-estimation" class="level2" data-number="24.2">
<h2 data-number="24.2" class="anchored" data-anchor-id="map-corrected-estimation"><span class="header-section-number">24.2</span> Map-Corrected Estimation</h2>
<p>Anchored by: NASA Harvest, Inbal Becker-Reshef and collaborators</p>
<p>This paradigm treats the EO-derived map as a primary product, but one that must be statistically adjusted using validation samples and error matrices. The approach, grounded in the methodology of <span class="citation" data-cites="Olofsson2014"><a href="#ref-Olofsson2014" role="doc-biblioref">[1]</a></span>, involves computing bias-adjusted area estimates by integrating confusion matrix values with map pixel counts and deriving confidence intervals based on sampling theory. This is consistent with operational good practice for statistically valid area estimation from remote sensing, as reviewed in <span class="citation" data-cites="Stehman2019"><a href="#ref-Stehman2019" role="doc-biblioref">[2]</a></span>.</p>
<p>It is particularly effective when the map covers large areas, classification accuracy is high-to-moderate, and a well-distributed reference dataset is available. This paradigm has been implemented operationally in conflict settings (e.g.&nbsp;Ukraine), where it enabled rapid area estimation despite difficult field conditions. It emphasizes design-based rigor, quantified uncertainty, and transparency — essential features of any official estimate.</p>
</section>
<section id="survey-calibrated-mapping" class="level2" data-number="24.3">
<h2 data-number="24.3" class="anchored" data-anchor-id="survey-calibrated-mapping"><span class="header-section-number">24.3</span> Survey-Calibrated Mapping</h2>
<p>Anchored by: FAO EOSTAT Zimbabwe, Lorenzo De Simone &amp; Sophie Bontemps</p>
<p>This paradigm places the statistical survey at the center, using EO maps as auxiliary information to enhance the representativeness, cost-efficiency, and resolution of national estimates. In the Zimbabwe case, a stratified ground survey (over 1,600 Secondary Sampling Units) was used not only for validating the crop type map, but also to build regression models that calibrated the mapped crop proportions. These regression estimators were then applied across the full gridded domain to derive corrected national crop area estimates. This model-assisted approach captures the best of both worlds: it leverages the spatial wall-to-wall nature of EO maps while preserving the statistical integrity of survey-based estimation. Importantly, it allowed FAO and ZIMSTAT to reduce bias and variance in estimates without increasing survey costs — a key feature for NSOs with resource constraints.</p>
</section>
<section id="uncertainty-aware-inference-from-imperfect-maps" class="level2" data-number="24.4">
<h2 data-number="24.4" class="anchored" data-anchor-id="uncertainty-aware-inference-from-imperfect-maps"><span class="header-section-number">24.4</span> Uncertainty-Aware Inference from Imperfect Maps</h2>
<p>Anchored by: Sherrie Wang (MIT/Stanford) – Prediction-Powered Inference (PPI)</p>
<p>This emerging paradigm tackles the hardest scenario: using imperfect or low-accuracy maps to produce reliable estimates, even when the available ground data are scarce. Sherrie Wang and collaborators introduced a framework known as Prediction-Powered Inference (PPI), which explicitly accounts for the predictive (but uncertain) nature of maps. Instead of assuming that EO outputs are accurate, PPI quantifies their uncertainty and integrates it into the estimation procedure, allowing users to generate statistically valid area and regression estimates with far fewer labeled data points <span class="citation" data-cites="Kluger2021"><a href="#ref-Wang2022" role="doc-biblioref">[4]</a></span>.</p>
<p>In benchmarking exercises, PPI was shown to dramatically reduce the confidence interval width compared to traditional methods, even when only a small ground-truth sample was available. This paradigm is particularly well-suited for data-scarce or rapidly changing contexts, where EO is the only timely source of information and statistical inference must be done with minimal fieldwork.</p>
</section>
<section id="why-these-paradigms-matter" class="level2" data-number="24.5">
<h2 data-number="24.5" class="anchored" data-anchor-id="why-these-paradigms-matter"><span class="header-section-number">24.5</span> Why These Paradigms Matter</h2>
<p>These three paradigms represent a progression — from treating maps as authoritative, to integrating them with surveys, to recognizing and modeling their imperfections. Each offers a viable pathway, depending on the country context, data availability, institutional mandate, and risk tolerance. All three converge on a single truth: map outputs must not be taken at face value. Whether through confusion matrix correction, regression calibration, or model-based inference, the path from EO-derived maps to national statistics requires methodological rigor. This chapter provides not only the conceptual foundation, but also real-world demonstrations for each of these paradigms. By replacing pixel-counting shortcuts with robust estimation frameworks, we aim to elevate EO from a promising technology to a pillar of trusted agricultural statistics.</p>
</section>
<section id="choosing-the-right-paradigm-comparative-considerations" class="level2" data-number="24.6">
<h2 data-number="24.6" class="anchored" data-anchor-id="choosing-the-right-paradigm-comparative-considerations"><span class="header-section-number">24.6</span> Choosing the Right Paradigm: Comparative Considerations</h2>
<p>The three paradigms presented in this chapter — Map-Corrected Estimation, Survey-Calibrated Mapping, and Uncertainty-Aware Inference from Imperfect Maps — are not mutually exclusive. Rather, they offer a flexible toolbox for NSOs and implementing partners to select the most appropriate approach based on external constraints and technical considerations. The decision to adopt one over another should be grounded in both institutional context and data characteristics.</p>
<table class="caption-top table">
<caption>External Enabling Conditions</caption>
<colgroup>
<col style="width: 18%">
<col style="width: 29%">
<col style="width: 31%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Condition</th>
<th style="text-align: left;">Map-Corrected Estimation</th>
<th style="text-align: left;">Survey-Calibrated Mapping</th>
<th style="text-align: left;">Uncertainty-Aware Inference</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Example</td>
<td style="text-align: left;">NASA Harvest</td>
<td style="text-align: left;">FAO EOSTAT Zimbabwe</td>
<td style="text-align: left;">Sherrie Wang/MIT PPI)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Survey Infrastructure</td>
<td style="text-align: left;">Moderate: needs statistically valid sample for validation</td>
<td style="text-align: left;">High: requires well-structured, stratified survey</td>
<td style="text-align: left;">Minimal: can operate with very small ground sample</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Map Availability</td>
<td style="text-align: left;">Required, high-quality map (e.g.&nbsp;&gt;70% OA)</td>
<td style="text-align: left;">Required, but can tolerate local noise</td>
<td style="text-align: left;">Required, but accuracy can be low or unknown</td>
</tr>
<tr class="even">
<td style="text-align: left;">Institutional Capacity (NSO)</td>
<td style="text-align: left;">Medium: needs basic familiarity with confusion matrices</td>
<td style="text-align: left;">High: needs regression modeling and post-strata expansion</td>
<td style="text-align: left;">Medium: needs ability to interpret model-based uncertainty</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Urgency / Time Sensitivity</td>
<td style="text-align: left;">High: can deliver rapidly once validation set is in place</td>
<td style="text-align: left;">Moderate: dependent on survey completion</td>
<td style="text-align: left;">High: useful in crisis or inaccessible areas</td>
</tr>
<tr class="even">
<td style="text-align: left;">Budget Constraints</td>
<td style="text-align: left;">Low–moderate cost if map is already produced</td>
<td style="text-align: left;">Cost-effective when integrated into existing survey design</td>
<td style="text-align: left;">Low cost; efficient use of sparse data</td>
</tr>
</tbody>
</table>
<table class="caption-top table">
<caption>Intrinsic Technical Criteria</caption>
<colgroup>
<col style="width: 18%">
<col style="width: 29%">
<col style="width: 31%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Criterion</th>
<th style="text-align: left;">Map-Corrected Estimation</th>
<th style="text-align: left;">Survey-Calibrated Mapping</th>
<th style="text-align: left;">Uncertainty-Aware Inference</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Map Bias Handling</td>
<td style="text-align: left;">Yes — through confusion matrix weighting</td>
<td style="text-align: left;">Yes — via regression calibration</td>
<td style="text-align: left;">Yes — explicitly modeled in PPI</td>
</tr>
<tr class="even">
<td style="text-align: left;">Variance Reduction</td>
<td style="text-align: left;">Moderate — dependent on sample size</td>
<td style="text-align: left;">High — leverages correlation to boost precision</td>
<td style="text-align: left;">Very High — uses map + model jointly</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Error Quantification (CI)</td>
<td style="text-align: left;">Explicit — design-based estimation</td>
<td style="text-align: left;">Explicit — from model residuals and design</td>
<td style="text-align: left;">Explicit — PPI produces valid intervals</td>
</tr>
<tr class="even">
<td style="text-align: left;">Assumption Sensitivity</td>
<td style="text-align: left;">Low — assumes random sampling</td>
<td style="text-align: left;">Medium — assumes linear relationship</td>
<td style="text-align: left;">Low–Medium — relies on predictive power but corrects for error</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Scalability</td>
<td style="text-align: left;">High — can be generalized nationally</td>
<td style="text-align: left;">High — when survey design is in place</td>
<td style="text-align: left;">High — especially suited for regional/rapid-scale deployment</td>
</tr>
</tbody>
</table>
<p>Synthesis: Context-Driven Method Selection</p>
<ul>
<li><p>If the EO map is of high quality, and a good validation sample is available, Map-Corrected Estimation provides a quick, interpretable, and rigorous path — ideal for crop area estimation in well-resourced systems or fast-response settings (e.g.&nbsp;Ukraine, US).</p></li>
<li><p>If the NSO already operates a stratified agricultural survey, Survey-Calibrated Mapping allows integration of EO as auxiliary data, improving precision and lowering cost per estimate — as successfully demonstrated in Zimbabwe</p></li>
<li><p>If field data are scarce or the map is noisy, but there is predictive signal in the EO layers, Uncertainty-Aware Inference (PPI) offers a powerful way to still deliver valid statistics — with strong appeal for humanitarian contexts, fragile states, or smallholder-dominant systems.</p></li>
</ul>
<p>These paradigms can also be combined. For example, a regression-calibrated estimator can be supplemented with design-based error correction, or PPI can be used to extend inference when only part of the territory has usable field data.</p>
</section>
<section id="bridging-science-statistics-and-policy-through-the-last-mile" class="level2" data-number="24.7">
<h2 data-number="24.7" class="anchored" data-anchor-id="bridging-science-statistics-and-policy-through-the-last-mile"><span class="header-section-number">24.7</span> Bridging Science, Statistics, and Policy through the Last Mile</h2>
<p>The issues covered in this chapter occupy a central position in the operationalization of Earth Observation (EO) for agricultural statistics: they address the last mile—the transformation of EO-derived maps into statistically valid estimates that inform national decisions. While preceding steps in the EO workflow focus on building maps, it is in this final step that spatial data are converted into policy-relevant numbers. This is the critical juncture where the potential of EO is either realized—or lost.</p>
<p>Achieving this transformation requires more than technical capacity; it demands a structured interface between scientific innovation, statistical production, and policy needs. National Statistical Offices (NSOs) need solutions that are not only accurate, but also statistically defensible, reproducible, and aligned with official protocols. At the same time, the scientific community benefits from grounded feedback to refine models and ensure operational applicability.</p>
<p>A key enabler of this translation has been the coordinated effort of the United Nations Committee of Experts on Big Data and Data Science for Official Statistics, particularly through its Task Team on Earth Observations for Agricultural Statistics. The Task Team has played a catalytic role in consolidating good practices, fostering country-led experimentation, and promoting the institutional adoption of EO methods within national statistical systems. By convening a diverse set of stakeholders—including NSOs, space agencies, academic experts, and international partners—it has created the conditions for methodological innovation to evolve into operational capability.</p>
<p>This chapter embodies this convergence. It illustrates how co-designed approaches—developed through collaboration and grounded in real-world constraints—can elevate EO from a research tool to a pillar of official agricultural statistics. Crucially, it underscores that robust area and yield estimation is not a peripheral technicality, but the decisive link connecting EO technologies to food security planning, climate-smart agriculture, and policy accountability. Without this last mile, EO data remain abstract; with it, they become instruments of evidence-based policy.</p>
</section>
<section id="references" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="references">References</h2>


<div id="refs" class="references csl-bib-body" data-entry-spacing="0" role="list">
<div id="ref-Olofsson2014" class="csl-entry" role="listitem">
<div class="csl-left-margin">[1] </div><div class="csl-right-inline">P. Olofsson, G. M. Foody, M. Herold, S. V. Stehman, C. E. Woodcock, and M. A. Wulder, <span>“Good practices for estimating area and assessing accuracy of land change,”</span> <em>Remote Sensing of Environment</em>, vol. 148, pp. 42–57, 2014.</div>
</div>
<div id="ref-Stehman2019" class="csl-entry" role="listitem">
<div class="csl-left-margin">[2] </div><div class="csl-right-inline">S. V. Stehman and G. M. Foody, <span>“Key issues in rigorous accuracy assessment of land cover products,”</span> <em>Remote Sensing of Environment</em>, vol. 231, p. 111199, 2019, doi: <a href="https://doi.org/10.1016/j.rse.2019.05.018">10.1016/j.rse.2019.05.018</a>.</div>
</div>
<div id="ref-Kluger2021" class="csl-entry" role="listitem">
<div class="csl-left-margin">[3] </div><div class="csl-right-inline">D. M. Kluger, S. Wang, and D. B. Lobell, <span>“Two shifts for crop mapping: <span>Leveraging</span> aggregate crop statistics to improve satellite-based maps in new regions,”</span> <em>Remote Sensing of Environment</em>, vol. 262, p. 112488, 2021, doi: <a href="https://doi.org/10.1016/j.rse.2021.112488">10.1016/j.rse.2021.112488</a>.</div>
</div>
<div id="ref-Wang2022" class="csl-entry" role="listitem">
<div class="csl-left-margin">[4] </div><div class="csl-right-inline">S. Wang, F. Waldner, and D. B. Lobell, <span>“Unlocking large-scale crop field delineation in smallholder farming systems with transfer learning and weak supervision,”</span> <em>Remote Sensing</em>, vol. 14, no. 22, 2022.</div>
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/FAO-EOSTAT\.github\.io\/UN-Handbook\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./additional.html" class="pagination-link" aria-label="Additional Topics">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Additional Topics</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./ad_world_cereal.html" class="pagination-link" aria-label="WorldCereal - A Global Effort for Crop Mapping">
        <span class="nav-page-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">WorldCereal - A Global Effort for Crop Mapping</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Edited by Gilberto Camara, Lorenzo de Simone and Ronald Jansen.</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/FAO-EOSTAT/UN-Handbook/edit/quarto/ad_geoglam.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/FAO-EOSTAT/UN-Handbook/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>This book was built with <a href="https://quarto.org/">Quarto</a>.</p>
</div>
  </div>
</footer>




</body></html>